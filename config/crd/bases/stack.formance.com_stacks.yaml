---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.9.0
  creationTimestamp: null
  name: stacks.stack.formance.com
spec:
  group: stack.formance.com
  names:
    kind: Stack
    listKind: StackList
    plural: stacks
    singular: stack
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.progress
      name: Status
      type: string
    - description: Stack Version
      jsonPath: .spec.version
      name: Version
      type: string
    - description: Stack Namespace
      jsonPath: .spec.namespace
      name: Namespace
      type: string
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: Stack is the Schema for the stacks API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: StackSpec defines the desired state of Stack
            properties:
              auth:
                properties:
                  delegatedOIDCServer:
                    properties:
                      clientID:
                        type: string
                      clientSecret:
                        type: string
                      issuer:
                        type: string
                    required:
                    - clientID
                    - clientSecret
                    - issuer
                    type: object
                  host:
                    type: string
                  image:
                    type: string
                  imagePullSecrets:
                    description: 'ImagePullSecrets is an optional list of references
                      to secrets in the same namespace to use for pulling any of the
                      images used by this PodSpec. If specified, these secrets will
                      be passed to individual puller implementations for them to use.
                      More info: https://kubernetes.io/docs/concepts/containers/images#specifying-imagepullsecrets-on-a-pod'
                    items:
                      description: LocalObjectReference contains enough information
                        to let you locate the referenced object inside the same namespace.
                      properties:
                        name:
                          description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            TODO: Add other useful fields. apiVersion, kind, uid?'
                          type: string
                      type: object
                    type: array
                  ingress:
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      enabled:
                        type: boolean
                      host:
                        type: string
                    type: object
                  postgres:
                    properties:
                      host:
                        type: string
                      password:
                        type: string
                      port:
                        type: integer
                      username:
                        type: string
                    required:
                    - host
                    - password
                    - port
                    - username
                    type: object
                  scheme:
                    type: string
                  signingKey:
                    type: string
                required:
                - delegatedOIDCServer
                - postgres
                type: object
              debug:
                type: boolean
              ingress:
                properties:
                  annotations:
                    additionalProperties:
                      type: string
                    type: object
                  enabled:
                    type: boolean
                  host:
                    type: string
                required:
                - host
                type: object
              kafka:
                properties:
                  brokers:
                    items:
                      type: string
                    type: array
                  sasl:
                    properties:
                      mechanism:
                        type: string
                      password:
                        type: string
                      scramSHASize:
                        type: string
                      username:
                        type: string
                    required:
                    - mechanism
                    - password
                    - scramSHASize
                    - username
                    type: object
                  tls:
                    type: boolean
                required:
                - brokers
                type: object
              monitoring:
                properties:
                  traces:
                    properties:
                      otlp:
                        properties:
                          endpoint:
                            properties:
                              value:
                                type: string
                              valueFrom:
                                description: EnvVarSource represents a source for
                                  the value of an EnvVar.
                                properties:
                                  configMapKeyRef:
                                    description: Selects a key of a ConfigMap.
                                    properties:
                                      key:
                                        description: The key to select.
                                        type: string
                                      name:
                                        description: 'Name of the referent. More info:
                                          https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                          TODO: Add other useful fields. apiVersion,
                                          kind, uid?'
                                        type: string
                                      optional:
                                        description: Specify whether the ConfigMap
                                          or its key must be defined
                                        type: boolean
                                    required:
                                    - key
                                    type: object
                                  fieldRef:
                                    description: 'Selects a field of the pod: supports
                                      metadata.name, metadata.namespace, `metadata.labels[''<KEY>'']`,
                                      `metadata.annotations[''<KEY>'']`, spec.nodeName,
                                      spec.serviceAccountName, status.hostIP, status.podIP,
                                      status.podIPs.'
                                    properties:
                                      apiVersion:
                                        description: Version of the schema the FieldPath
                                          is written in terms of, defaults to "v1".
                                        type: string
                                      fieldPath:
                                        description: Path of the field to select in
                                          the specified API version.
                                        type: string
                                    required:
                                    - fieldPath
                                    type: object
                                  resourceFieldRef:
                                    description: 'Selects a resource of the container:
                                      only resources limits and requests (limits.cpu,
                                      limits.memory, limits.ephemeral-storage, requests.cpu,
                                      requests.memory and requests.ephemeral-storage)
                                      are currently supported.'
                                    properties:
                                      containerName:
                                        description: 'Container name: required for
                                          volumes, optional for env vars'
                                        type: string
                                      divisor:
                                        anyOf:
                                        - type: integer
                                        - type: string
                                        description: Specifies the output format of
                                          the exposed resources, defaults to "1"
                                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                        x-kubernetes-int-or-string: true
                                      resource:
                                        description: 'Required: resource to select'
                                        type: string
                                    required:
                                    - resource
                                    type: object
                                  secretKeyRef:
                                    description: Selects a key of a secret in the
                                      pod's namespace
                                    properties:
                                      key:
                                        description: The key of the secret to select
                                          from.  Must be a valid secret key.
                                        type: string
                                      name:
                                        description: 'Name of the referent. More info:
                                          https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                          TODO: Add other useful fields. apiVersion,
                                          kind, uid?'
                                        type: string
                                      optional:
                                        description: Specify whether the Secret or
                                          its key must be defined
                                        type: boolean
                                    required:
                                    - key
                                    type: object
                                type: object
                            type: object
                          insecure:
                            type: boolean
                          mode:
                            type: string
                          port:
                            format: int32
                            type: integer
                        type: object
                    type: object
                type: object
              namespace:
                type: string
              services:
                properties:
                  control:
                    properties:
                      debug:
                        type: boolean
                      image:
                        type: string
                      imagePullSecrets:
                        description: 'ImagePullSecrets is an optional list of references
                          to secrets in the same namespace to use for pulling any
                          of the images used by this PodSpec. If specified, these
                          secrets will be passed to individual puller implementations
                          for them to use. More info: https://kubernetes.io/docs/concepts/containers/images#specifying-imagepullsecrets-on-a-pod'
                        items:
                          description: LocalObjectReference contains enough information
                            to let you locate the referenced object inside the same
                            namespace.
                          properties:
                            name:
                              description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                TODO: Add other useful fields. apiVersion, kind, uid?'
                              type: string
                          type: object
                        type: array
                      ingress:
                        properties:
                          annotations:
                            additionalProperties:
                              type: string
                            type: object
                          enabled:
                            type: boolean
                          host:
                            type: string
                        type: object
                      scaling:
                        properties:
                          cpuLimit:
                            type: integer
                          enabled:
                            type: boolean
                          maxReplica:
                            type: integer
                          minReplica:
                            type: integer
                        type: object
                    type: object
                  ledger:
                    properties:
                      debug:
                        type: boolean
                      image:
                        type: string
                      imagePullSecrets:
                        description: 'ImagePullSecrets is an optional list of references
                          to secrets in the same namespace to use for pulling any
                          of the images used by this PodSpec. If specified, these
                          secrets will be passed to individual puller implementations
                          for them to use. More info: https://kubernetes.io/docs/concepts/containers/images#specifying-imagepullsecrets-on-a-pod'
                        items:
                          description: LocalObjectReference contains enough information
                            to let you locate the referenced object inside the same
                            namespace.
                          properties:
                            name:
                              description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                TODO: Add other useful fields. apiVersion, kind, uid?'
                              type: string
                          type: object
                        type: array
                      ingress:
                        properties:
                          annotations:
                            additionalProperties:
                              type: string
                            type: object
                          enabled:
                            type: boolean
                          host:
                            type: string
                        type: object
                      postgres:
                        properties:
                          host:
                            type: string
                          password:
                            type: string
                          port:
                            type: integer
                          username:
                            type: string
                        required:
                        - host
                        - password
                        - port
                        - username
                        type: object
                      redis:
                        properties:
                          tls:
                            type: boolean
                          uri:
                            type: string
                        required:
                        - uri
                        type: object
                      scaling:
                        properties:
                          cpuLimit:
                            type: integer
                          enabled:
                            type: boolean
                          maxReplica:
                            type: integer
                          minReplica:
                            type: integer
                        type: object
                    required:
                    - postgres
                    type: object
                  payments:
                    properties:
                      debug:
                        type: boolean
                      image:
                        type: string
                      imagePullSecrets:
                        description: 'ImagePullSecrets is an optional list of references
                          to secrets in the same namespace to use for pulling any
                          of the images used by this PodSpec. If specified, these
                          secrets will be passed to individual puller implementations
                          for them to use. More info: https://kubernetes.io/docs/concepts/containers/images#specifying-imagepullsecrets-on-a-pod'
                        items:
                          description: LocalObjectReference contains enough information
                            to let you locate the referenced object inside the same
                            namespace.
                          properties:
                            name:
                              description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                TODO: Add other useful fields. apiVersion, kind, uid?'
                              type: string
                          type: object
                        type: array
                      ingress:
                        properties:
                          annotations:
                            additionalProperties:
                              type: string
                            type: object
                          enabled:
                            type: boolean
                          host:
                            type: string
                        type: object
                      mongoDB:
                        properties:
                          host:
                            type: string
                          password:
                            type: string
                          port:
                            type: integer
                          useSrv:
                            type: boolean
                          username:
                            type: string
                        required:
                        - host
                        - password
                        - port
                        - username
                        type: object
                      scaling:
                        properties:
                          cpuLimit:
                            type: integer
                          enabled:
                            type: boolean
                          maxReplica:
                            type: integer
                          minReplica:
                            type: integer
                        type: object
                    required:
                    - mongoDB
                    type: object
                  search:
                    properties:
                      debug:
                        type: boolean
                      elasticSearch:
                        properties:
                          basicAuth:
                            properties:
                              password:
                                type: string
                              username:
                                type: string
                            required:
                            - password
                            - username
                            type: object
                          host:
                            type: string
                          port:
                            type: integer
                          scheme:
                            type: string
                          tls:
                            properties:
                              enabled:
                                type: boolean
                              skipCertVerify:
                                type: boolean
                            type: object
                        required:
                        - host
                        - port
                        - scheme
                        type: object
                      image:
                        type: string
                      imagePullSecrets:
                        description: 'ImagePullSecrets is an optional list of references
                          to secrets in the same namespace to use for pulling any
                          of the images used by this PodSpec. If specified, these
                          secrets will be passed to individual puller implementations
                          for them to use. More info: https://kubernetes.io/docs/concepts/containers/images#specifying-imagepullsecrets-on-a-pod'
                        items:
                          description: LocalObjectReference contains enough information
                            to let you locate the referenced object inside the same
                            namespace.
                          properties:
                            name:
                              description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                TODO: Add other useful fields. apiVersion, kind, uid?'
                              type: string
                          type: object
                        type: array
                      ingress:
                        properties:
                          annotations:
                            additionalProperties:
                              type: string
                            type: object
                          enabled:
                            type: boolean
                          host:
                            type: string
                        type: object
                      scaling:
                        properties:
                          cpuLimit:
                            type: integer
                          enabled:
                            type: boolean
                          maxReplica:
                            type: integer
                          minReplica:
                            type: integer
                        type: object
                    required:
                    - elasticSearch
                    type: object
                type: object
            type: object
          status:
            properties:
              conditions:
                items:
                  properties:
                    lastTransitionTime:
                      description: lastTransitionTime is the last time the condition
                        transitioned from one status to another. This should be when
                        the underlying condition changed.  If that is not known, then
                        using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: message is a human readable message indicating
                        details about the transition. This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: observedGeneration represents the .metadata.generation
                        that the condition was set based upon. For instance, if .metadata.generation
                        is currently 12, but the .status.conditions[x].observedGeneration
                        is 9, the condition is out of date with respect to the current
                        state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                        --- Many .condition.type values are consistent across resources
                        like Available, but because arbitrary conditions can be useful
                        (see .node.status.conditions), the ability to deconflict is
                        important. The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - status
                  - type
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
